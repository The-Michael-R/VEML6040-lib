<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Simple VEML6040 library with example: inc/veml6040.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Simple VEML6040 library with example
   </div>
   <div id="projectbrief">A small library allowing to read the VEML6040</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bfccd401955b95cf8c75461437045ac0.html">inc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">veml6040.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;stdint.h&quot;</code><br />
<code>#include &quot;<a class="el" href="error__codes_8h_source.html">error_codes.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="global__conf_8h_source.html">global_conf.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="debug__util_8h_source.html">debug_util.h</a>&quot;</code><br />
</div>
<p><a href="veml6040_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8db8ef8c19642d2d88117835208f7217"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a8db8ef8c19642d2d88117835208f7217">VEML6040_I2C_ADDESS</a>&#160;&#160;&#160;(0x10)</td></tr>
<tr class="separator:a8db8ef8c19642d2d88117835208f7217"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dfa38fa86659242218ed20cdb053449"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a3dfa38fa86659242218ed20cdb053449">VEML6040_OFFSET_CONF</a>&#160;&#160;&#160;(0x00)</td></tr>
<tr class="separator:a3dfa38fa86659242218ed20cdb053449"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4651b0b58243b5a63d9ca70be6a8db7"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#ac4651b0b58243b5a63d9ca70be6a8db7">VEML6040_OFFSET_R_DATA</a>&#160;&#160;&#160;(0x08)</td></tr>
<tr class="separator:ac4651b0b58243b5a63d9ca70be6a8db7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6575f75756c6a2fd2941689e2ed4190"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#ab6575f75756c6a2fd2941689e2ed4190">VEML6040_OFFSET_G_DATA</a>&#160;&#160;&#160;(0x09)</td></tr>
<tr class="separator:ab6575f75756c6a2fd2941689e2ed4190"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ffead096304fc33ea6c2f622bf53bf3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a6ffead096304fc33ea6c2f622bf53bf3">VEML6040_OFFSET_B_DATA</a>&#160;&#160;&#160;(0x0a)</td></tr>
<tr class="separator:a6ffead096304fc33ea6c2f622bf53bf3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a6d8e1a96ae759c0b83ac85abc47e30"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a4a6d8e1a96ae759c0b83ac85abc47e30">VEML6040_OFFSET_W_DATA</a>&#160;&#160;&#160;(0x0b)</td></tr>
<tr class="separator:a4a6d8e1a96ae759c0b83ac85abc47e30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a713719430b269ea80da365b652a6429b"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a713719430b269ea80da365b652a6429b">VEML6040_CONF_IT</a>&#160;&#160;&#160;(4)</td></tr>
<tr class="separator:a713719430b269ea80da365b652a6429b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a682a14ee8caef34d2ebedba3af932a39"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a682a14ee8caef34d2ebedba3af932a39">VEML6040_CONF_IT_MSK</a>&#160;&#160;&#160;(111 &lt;&lt; <a class="el" href="veml6040_8h.html#a713719430b269ea80da365b652a6429b">VEML6040_CONF_IT</a>)</td></tr>
<tr class="separator:a682a14ee8caef34d2ebedba3af932a39"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad672f9ac7ef1e1b34bcb3a0111f3ced0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#ad672f9ac7ef1e1b34bcb3a0111f3ced0">VEML6040_CONF_TRIG</a>&#160;&#160;&#160;(2)</td></tr>
<tr class="separator:ad672f9ac7ef1e1b34bcb3a0111f3ced0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aea67de681f1c605378959a737136bf25"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#aea67de681f1c605378959a737136bf25">VEML6040_CONF_AF</a>&#160;&#160;&#160;(1)</td></tr>
<tr class="separator:aea67de681f1c605378959a737136bf25"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6bf83cc21b212f24945bbc3c37e32bcf"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a6bf83cc21b212f24945bbc3c37e32bcf">VEML6040_CONF_SD</a>&#160;&#160;&#160;(0)</td></tr>
<tr class="separator:a6bf83cc21b212f24945bbc3c37e32bcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6128a2b64805c36b5804fb34ec0e84d3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a6128a2b64805c36b5804fb34ec0e84d3">LUX_PER_STEP</a>&#160;&#160;&#160;0.007865</td></tr>
<tr class="separator:a6128a2b64805c36b5804fb34ec0e84d3"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aafc98692d830cbd0997af99c5b6e994d"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#aafc98692d830cbd0997af99c5b6e994d">veml6040_init</a> ()</td></tr>
<tr class="separator:aafc98692d830cbd0997af99c5b6e994d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adbd844d9487daebc8bd04baa389cd1d1"><td class="memItemLeft" align="right" valign="top"><a class="el" href="error__codes_8h.html#ac6886c3dac8e0ce47d8f74d206f6b2af">ERROR_CODE_T</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#adbd844d9487daebc8bd04baa389cd1d1">sample_veml</a> (uint32_t *raw_rgbw)</td></tr>
<tr class="separator:adbd844d9487daebc8bd04baa389cd1d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a011cb60290243a4a171ed466762c7bc5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="veml6040_8h.html#a011cb60290243a4a171ed466762c7bc5">convert_luminance</a> (const uint32_t *raw_rgbw, float *lux_rgbw)</td></tr>
<tr class="separator:a011cb60290243a4a171ed466762c7bc5"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a6128a2b64805c36b5804fb34ec0e84d3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6128a2b64805c36b5804fb34ec0e84d3">&#9670;&nbsp;</a></span>LUX_PER_STEP</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LUX_PER_STEP&#160;&#160;&#160;0.007865</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="aea67de681f1c605378959a737136bf25"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aea67de681f1c605378959a737136bf25">&#9670;&nbsp;</a></span>VEML6040_CONF_AF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_CONF_AF&#160;&#160;&#160;(1)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a713719430b269ea80da365b652a6429b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a713719430b269ea80da365b652a6429b">&#9670;&nbsp;</a></span>VEML6040_CONF_IT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_CONF_IT&#160;&#160;&#160;(4)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Position and length of control bits in CONF Register CONF[6:4] IT Integration time setting CONF[2] TRIG Proceed one detecting cycle at manual force mode CONF[1] AF Auto / manual force mode CONF[0] SD Chip shutdown setting</p>
<p>IT definition Integration time of sensor IT = 0b000 -&gt; 40ms IT = 0b001 -&gt; 80ms IT = 0b010 -&gt; 160ms IT = 0b011 -&gt; 320ms IT = 0b100 -&gt; 640ms IT = 0b101 -&gt; 1280ms</p>
<p>TRIG definition TRIG = 0 -&gt; No trigger TRIG = 1 -&gt; Trigger one time detect cycle</p>
<p>AF definition AF = 0 -&gt; Auto mode (continious measurement) AF = 1 -&gt; Force mode (single measurement)</p>
<p>SD definition SD = 0 -&gt; Normal operation SD = 1 -&gt; Shut Down mode </p>

</div>
</div>
<a id="a682a14ee8caef34d2ebedba3af932a39"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a682a14ee8caef34d2ebedba3af932a39">&#9670;&nbsp;</a></span>VEML6040_CONF_IT_MSK</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_CONF_IT_MSK&#160;&#160;&#160;(111 &lt;&lt; <a class="el" href="veml6040_8h.html#a713719430b269ea80da365b652a6429b">VEML6040_CONF_IT</a>)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a6bf83cc21b212f24945bbc3c37e32bcf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6bf83cc21b212f24945bbc3c37e32bcf">&#9670;&nbsp;</a></span>VEML6040_CONF_SD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_CONF_SD&#160;&#160;&#160;(0)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ad672f9ac7ef1e1b34bcb3a0111f3ced0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad672f9ac7ef1e1b34bcb3a0111f3ced0">&#9670;&nbsp;</a></span>VEML6040_CONF_TRIG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_CONF_TRIG&#160;&#160;&#160;(2)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a8db8ef8c19642d2d88117835208f7217"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8db8ef8c19642d2d88117835208f7217">&#9670;&nbsp;</a></span>VEML6040_I2C_ADDESS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_I2C_ADDESS&#160;&#160;&#160;(0x10)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Register definitions for VEML6040 RGBW light sensor Datasheet: <a href="http://www.vishay.com/docs/84276/veml6040.pdf">http://www.vishay.com/docs/84276/veml6040.pdf</a> VEML6040 slave address </p>

</div>
</div>
<a id="a6ffead096304fc33ea6c2f622bf53bf3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ffead096304fc33ea6c2f622bf53bf3">&#9670;&nbsp;</a></span>VEML6040_OFFSET_B_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_OFFSET_B_DATA&#160;&#160;&#160;(0x0a)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a3dfa38fa86659242218ed20cdb053449"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dfa38fa86659242218ed20cdb053449">&#9670;&nbsp;</a></span>VEML6040_OFFSET_CONF</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_OFFSET_CONF&#160;&#160;&#160;(0x00)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Offset definitions of registers in VEML6040 </p>

</div>
</div>
<a id="ab6575f75756c6a2fd2941689e2ed4190"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6575f75756c6a2fd2941689e2ed4190">&#9670;&nbsp;</a></span>VEML6040_OFFSET_G_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_OFFSET_G_DATA&#160;&#160;&#160;(0x09)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="ac4651b0b58243b5a63d9ca70be6a8db7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac4651b0b58243b5a63d9ca70be6a8db7">&#9670;&nbsp;</a></span>VEML6040_OFFSET_R_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_OFFSET_R_DATA&#160;&#160;&#160;(0x08)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a id="a4a6d8e1a96ae759c0b83ac85abc47e30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a6d8e1a96ae759c0b83ac85abc47e30">&#9670;&nbsp;</a></span>VEML6040_OFFSET_W_DATA</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define VEML6040_OFFSET_W_DATA&#160;&#160;&#160;(0x0b)</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a011cb60290243a4a171ed466762c7bc5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a011cb60290243a4a171ed466762c7bc5">&#9670;&nbsp;</a></span>convert_luminance()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void convert_luminance </td>
          <td>(</td>
          <td class="paramtype">const uint32_t *&#160;</td>
          <td class="paramname"><em>raw_rgbw</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float *&#160;</td>
          <td class="paramname"><em>lux_rgbw</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Convert the RAW values to lux. It simply multiplies the RAW value with 0.007865</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">const</td><td>raw_rgbw Array that holds the RAw values provided from the function sample_veml </td></tr>
    <tr><td class="paramname">*lux_rgbw</td><td>Pointer to an array of floats. This array will have the values in lux after the function call. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="adbd844d9487daebc8bd04baa389cd1d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adbd844d9487daebc8bd04baa389cd1d1">&#9670;&nbsp;</a></span>sample_veml()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="error__codes_8h.html#ac6886c3dac8e0ce47d8f74d206f6b2af">ERROR_CODE_T</a> sample_veml </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>raw_rgbw</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Read all four channels form veml6040. To get the full dynamic range of the device this code tries the shortest integration time and increases until all channels are in the optimal range or the longest integration tie is reached.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">raw_rgbw</td><td>Pointer to array of uint32_t. This array will hold the current values of lumince in the order of red, green, blue, white. Each step represents 0.007865 Lux. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="aafc98692d830cbd0997af99c5b6e994d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafc98692d830cbd0997af99c5b6e994d">&#9670;&nbsp;</a></span>veml6040_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int veml6040_init </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Public functions</p>
<p>Initial√≠zes the i2c interface and the veml6040 device </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
